

- フォルダ構成を整理する

- 名前空間を整理する

- 言語名を "fire" にする

-------------------

- Node を IL に変換する ( Compiler )

- IL から バイナリに変換 ( Codegen )

- バイナリを実行する ( Interp )

- バイナリをファイルに出力する機能 ( "-o" オプション )


namespace fire {

  namespace lexer {
    struct Token;
    class Lexer;
  }

  namespace parser {
    struct Node;
    
    struct Nd*;

    class Parser;
  }

  namespace sema {
    struct TypeInfo;

    struct Symbol;
    struct SymbolTable;

    struct ScopeContext;

    class Sema;
  }

  namespace vm {

    //
    // Compiler = Node* を元に Instruction を作成する
    // Interp   = Instruction を実行する
    //

    enum Operations : uint8_t;

    struct Instruction;


    namespace compiler {
      class Compiler;
    }

    namespace interp {
      struct Object;

      struct VCPU;    // Virtual CPU

      class Interp;   // Interpreter
    }

  }

}

--------------------------------

  fn main() {
    println("Hello, World!");

    if func() == 123 {
      println("aiueo");
    }
  }

  ----------

_start:
  do main();
  ret;

func main:
  do println("Hello, World!");
  jmpz func() == 123, _L1
  do println("aiueo");
_L1:
  ret;


// ラベルはすべて番号